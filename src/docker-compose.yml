version: '3.8'

services:
  nginx:
    build:
      context: requirements/nginx/
      args:
        - DOMAIN=$DOMAIN
    env_file:
       - .env
    ports:
      - 443:443
    volumes:
      - wordpress:/var/www/
    depends_on:
      - wordpress
  mariadb:
    build:
      context: requirements/mariadb/
      args:
        - DB_NAME=$DB_NAME
        - DB_USER=$DB_USER
        - DB_PASSWORD=$DB_PASSWORD
        - DB_PASSWORD_ROOT=$DB_PASSWORD_ROOT
    env_file:
      - .env
  wordpress:
    build:
      context: requirements/wordpress/
    volumes:
      - wordpress:/var/www/
    env_file:
      - .env
    depends_on:
      - mariadb
  # dev:
    # build: requirements/dev/
volumes:
  wordpress: